<!DOCTYPE html>
<html lang="en">
<head>
  <style>
    .buttons {
      position: relative;
      left: 50px;
      top: 100px;
    }
  </style>
  <script>
    function buttonHandler() {
      alert('Hello')
    }
  </script>
</head>

{{ template "block/head.html" . }}

<body>
<div class="loader"></div>
<div id="app">
  <div class="main-wrapper main-wrapper-1">
    <div class="navbar-bg"></div>
    {{ template "block/nav.html" . }}

    <!-- Main Content -->
    {{ template "block/leftbar.html" . }}

    <div class="main-content">
      <section class="section">

        <div class="section-body">
          <div class="row">
            <div class="col-12">
              <div class="card">
                <div class="card-header">
                  <h4>All Tasks</h4>
                </div>
                <div class="card-body">
                  {{ template "block/cateversiontab.html" .}}
                  <div class="tab-content" id="myTabContent2">
                    <div class="tab-pane fade show active" id="jobTab" role="tabpanel" aria-labelledby="home-tab3">
                      <section class="section">

                        <div class="section-body">
                          <div class="row">
                            <div class="col-12">
                              <div class="card">
                                <div class="card-body">
                                  <div class="table-responsive">
{{/*                                    <form action="/category/{{$.version}}/aggregate/" method="post"*/}}
{{/*                                          success-msg="Your request has been sent."*/}}
{{/*                                          fail-msg="Sorry it seems that server is not responding, Sorry for the inconvenience!"*/}}
{{/*                                    >*/}}

                                    {{/*                                      <div style="padding: 0 0 20px 20px;font-size:18px"><a style="padding: 5px;" href="/new/">New Version</a></div>*/}}
                                    <table  class="table table-striped table-hover" id="tableExport" name="tableExport" style="width:100%;">
                                      <div style="left: 90px; float: left">
                                        <a class="btn btn-primary" href="/category/{{$.version}}/add/">Add New Category</a>
                                      </div>
                                      <div style="float:left;margin-left: 16px;">
                                        <form action="/category/{{$.version}}/aggregate/" method="post">
                                        <input class="btn btn-primary btn-green" type="submit" value="Aggregate Current Report">
                                        </form>
                                      </div>
                                      <div style="float:left;margin-left: 16px;">
                                        <a class="btn btn-primary" href="/category/{{$.version}}/history/">Display Category History</a>
                                      </div>
                                      <div style="clear:both; margin-bottom: 10px"></div>
                                      <thead>
                                      <tr>
                                        <th>Project Name</th>
                                        <th>Total Test case</th>
                                        <th>Executed#</th>
                                        <th>Pass#</th>
                                        <th>Fail#</th>
                                        <th>Exe Ratio</th>
                                        <th>Pass Ratio</th>
                                        <th>Fail Ratio</th>
                                        <th>Operation</th>
                                      </tr>
                                      </thead>
                                      <tbody>

                                      {{range $case:=$.Contents}}

                                        <tr>
                                          <td name="ProjectName"><a target="_blank" href="/category/{{$.version}}/{{$case.ProjectName}}" value="{{$case.ProjectName}}">{{$case.ProjectName}}</a></td>
                                          <td name="TotalJob" value="{{$case.TotalJob}}">{{$case.TotalJob}}</td>
                                          <td name="{{$case.Executed}}">{{$case.Executed}}</td>
                                          <td name="{{$case.Pass}}">{{$case.Pass}}</td>
                                          <td name="{{$case.Fail}}">{{$case.Fail}}</td>
                                          <td name="{{$case.ExeRatio}}">{{$case.ExeRatio}}</td>
                                          <td name="{{$case.PassRatio}}">{{$case.PassRatio}}</td>
                                          <td name="{{$case.FailRatio}}">{{$case.FailRatio}}</td>
                                          <td><a href="/category/{{$.version}}/edit/{{$case.ProjectName}}">Edit</a>  <form  action="/category/{{$.version}}/delete/{{$case.ProjectName}}" method="post"><button type="submit" onclick="return confirm('Are you sure delete it？')" >Delete</button></form></td>

                                        </tr>
                                      {{end}}
                                      </tbody>
                                    </table>
{{/*                                    </form>*/}}
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </section>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      {{ template "block/rightbar.html" . }}
    </div>
    <footer class="main-footer">
      <div class="footer-left">
        Copyright &copy; 2019 <div class="bullet"></div> Design By <a href="http://www.bootstrapmb.com/">Redstar</a>
      </div>
      <div class="footer-right">
      </div>
    </footer>
  </div>
</div>
<!-- General JS Scripts -->
<script src="/static/assets/js/app.min.js"></script>
<!-- JS Libraies -->
<!-- Page Specific JS File -->
<script src="/static/assets/bundles/datatables/datatables.min.js"></script>
<script src="/static/assets/bundles/datatables/DataTables-1.10.16/js/dataTables.bootstrap4.min.js"></script>
<script src="/static/assets/bundles/datatables/export-tables/dataTables.buttons.min.js"></script>
<script src="/static/assets/bundles/datatables/export-tables/buttons.flash.min.js"></script>
<script src="/static/assets/bundles/datatables/export-tables/jszip.min.js"></script>
<script src="/static/assets/bundles/datatables/export-tables/pdfmake.min.js"></script>
<script src="/static/assets/bundles/datatables/export-tables/vfs_fonts.js"></script>
<script src="/static/assets/bundles/datatables/export-tables/buttons.print.min.js"></script>
<script src="/static/assets/js/page/datatables.js"></script>
<!-- Template JS File -->
<script src="/static/assets/js/scripts.js"></script>
<!-- Custom JS File -->
<script src="/static/assets/js/custom.js"></script>

<script language="JavaScript">
  function tijiao(){
    lastTime =$('#LastUpdate').val()
    lastTimeObj=new Date(lastTime)
    UTCString = lastTimeObj.getUTCFullYear()+"-"
    UTCString =UTCString + (lastTimeObj.getUTCMonth()+ 1)+"-"
    UTCString =UTCString +     lastTimeObj.getUTCDate()+" "
    UTCString =UTCString +     lastTimeObj.getUTCHours()+":"
    UTCString =UTCString +     lastTimeObj.getUTCMinutes()+":00"
    // UTCString =UTCString +     "lastTimeObj.getUTCSeconds()"
    UTCString2= dateFormat('YYYY-mm-dd HH:MM:SS', new Date(UTCString))
    $('#UTCDateTime').val(UTCString2)

    return true

  }
  function dateFormat(fmt, date) {
    let ret;
    const opt = {
      "Y+": date.getFullYear().toString(),        // 年
      "m+": (date.getMonth() + 1).toString(),     // 月
      "d+": date.getDate().toString(),            // 日
      "H+": date.getHours().toString(),           // 时
      "M+": date.getMinutes().toString(),         // 分
      "S+": date.getSeconds().toString()          // 秒
      // 有其他格式化字符需求可以继续添加，必须转化成字符串
    };
    for (let k in opt) {
      ret = new RegExp("(" + k + ")").exec(fmt);
      if (ret) {
        fmt = fmt.replace(ret[1], (ret[1].length == 1) ? (opt[k]) : (opt[k].padStart(ret[1].length, "0")))
      };
    };
    return fmt;
  }
</script>

</body>

</html>